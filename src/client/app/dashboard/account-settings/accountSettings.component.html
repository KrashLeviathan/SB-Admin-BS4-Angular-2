<div class="container-fluid">
  <!-- Page Heading -->
  <div class="row">
    <div class="col-lg-12">
      <h2 class="page-header">
        Account Settings
      </h2>
    </div>
  </div>
  <!-- /.row -->

  <div class="row">
    <div class="col-md-9 col-lg-7 col-xl-6">

      <form #f="ngForm" (ngSubmit)="onSubmit(f)" role="form" novalidate>
        <fieldset class="form-group"
                  [class.has-warning]="accountName.errors && (accountName.dirty || accountName.touched)"
                  [attr.disabled]="formDisabled ? true : null">
          <label class="form-control-label">Account Name</label>
          <input name="accountName" [ngModel]="activeAccount.accountName"
                 required minlength=4 [attr.maxlength]="MAX_NAME_LENGTH" #accountName="ngModel"
                 class="form-control form-control-warning" type="text" value="{{accountName.value}}">
        </fieldset>

        <fieldset class="form-group"
                  [attr.disabled]="formDisabled ? true : null">
          <label class="form-control-label">Street Address</label>
          <input name="streetAddress" [ngModel]="activeAccount.streetAddress"
                 [attr.maxlength]="MAX_ADDRESS_LENGTH" #streetAddress="ngModel"
                 class="form-control" type="text" value="{{streetAddress.value}}">
        </fieldset>

        <fieldset class="form-group"
                  [attr.disabled]="formDisabled ? true : null">
          <label class="form-control-label">City</label>
          <input name="city" [ngModel]="activeAccount.city"
                 [attr.maxlength]="MAX_CITY_LENGTH" #city="ngModel"
                 class="form-control" type="text" value="{{city.value}}">
        </fieldset>

        <fieldset class="form-group" [attr.disabled]="formDisabled ? true : null">
          <label class="form-control-label">State</label>
          <select name="state" [ngModel]="activeAccount.state" required id="stateOption" class="form-control">
            <option value="" disabled>Choose a state</option>
            <option *ngFor="let state of states" [ngValue]="state.abbreviation">
              {{state.fullName}} - {{state.abbreviation}}
            </option>
          </select>
        </fieldset>

        <fieldset id="zip-field" class="form-group"
                  [class.has-warning]="zip.errors"
                  [attr.disabled]="formDisabled ? true : null">
          <label class="form-control-label">Zip</label>
          <input name="zip" [ngModel]="activeAccount.zip" #zip="ngModel"
                 class="form-control form-control-warning"
                 type="text" pattern="(\d\d\d\d\d)?" value="{{zip.value}}">
        </fieldset>

        <button type="button" class="btn btn-secondary" *ngIf="!formDisabled"
                (click)="cancelChanges(f)">Cancel
        </button>
        <button type="submit" class="btn btn-secondary" *ngIf="!formDisabled"
                (click)="onSubmit(f)">Submit
        </button>
        <button type="button" class="btn btn-secondary" *ngIf="formDisabled"
                (click)="formDisabled = !formDisabled"
                [attr.disabled]="savingState ? true : null">Make Changes
        </button>
        &nbsp;&nbsp;&nbsp;<i class="fa fa-lg fa-cog fa-spin" *ngIf="savingState"></i>
        &nbsp;&nbsp;&nbsp;<span class="text-danger" [hidden]="!errorOnSave">Invalid form data!</span>
      </form>

    </div>
    <div [hidden]="!accountName.errors?.minlength" class="col-md-9 col-lg-5 col-xl-6">
      <div class="alert alert-warning" role="alert">
        Account name must be greater than 4 characters.
      </div>
    </div>
    <div [hidden]="!accountName.errors?.required" class="col-md-9 col-lg-5 col-xl-6">
      <div class="alert alert-warning" role="alert">
        Account name is required.
      </div>
    </div>
    <div [hidden]="!zip.errors" class="col-md-9 col-lg-5 col-xl-6">
      <div class="alert alert-warning" role="alert">
        Zip codes must be five digits in length.
      </div>
    </div>
  </div>
  <!-- /.row -->

</div>
